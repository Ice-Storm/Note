图形系统和模型
===========
[TOC]

给定了场景中的对象、对象反射光的性质和场景中光源的性质，有许多方法可以生成该场景的图像。
下面介绍两种物理方法，虽然不能够用来实现最终目的——实时生成图像，但是可以帮助理解如何构造一个有用的成像系统。

#跟踪光线（适合镜面反射类型）
为了构造一个成像模型，可以先跟踪从光源发出的光线。如果从照相机可以看到光源，那么一部分光源就可以从光源出发，直接通过镜头到达胶片平面。然而，大多数光线一直照射到无穷远，既没有直接进入照相机，也没有到达任何对象。这些光线没有贡献。余下的光线照射到对象，这些光线可以与对象表面以各种方式相互作用。例如，如果表面是镜子，那么反射光线可能会进入照相机的镜头（这要视表面的方向而定），光线跟踪（ray tracing）和光子映射(photon mapping)是基于上面这些思想的图像生成技术，它们可以作为利用计算机生成图像的基础。虽然跟踪光线可以提供对物理世界的一个很好的近似，但它并不适合与实时计算。

#能量守恒（适合漫反射类型）
其他图像生成的物理方法以能量守恒为基础，其中在计算机图形学中最重要的是辐射度方法（radiosity）。这种方法最适合于把入射光线均匀地向所有方向散射的表面。但是即使对这种情况，辐射度方法所需要的计算量任然太大，因而不能实时实现。

#虚拟照相机模型
我们认为，利用计算机生成图像和光学系统中成像是类似的，这一模式称为虚拟照相机模型（synthetic—camera model）这里观察者是一个折叠暗箱照相机。图像是在照相机后部的胶片平面上生成的。为了能够模仿这个过程以生成人造图像，需要明确一些基本原理。

![imaging-with-the-synthetic-camera][1]

第一，对象的确定不依赖于观察者。因此，在一个图形库中，可以期望有不同的函数来分别指定对象和观察者。
第二，可以像对针孔照相机所做的那样，利用简单的集合方法计算图像。

![equivalent-view-of-image-formation][2]

在这个虚拟照相机中，移到透镜前面来的虚拟成像平面称为投影平面（projection plane）（这是观察点的作用）。对象上一点的像位于投影先和投影平面的交点。

还必须考虑到图形的大小是受限的。不是所有的物体都可以在针孔照相机的胶片平面上完整成像，视角就是用来描述这个限制的。可以通过在投影平面内设置一个裁剪矩形（clipping rectangle）或者裁剪窗口来把这个限制移到透镜的前面（这就是投影矩阵的作用）。

![clipping][3]

#建模-渲染模式
在许多场合，尤其是CAD应用和电影中一些复杂图像的生成，可以把场景的建模和图像的绘制【或者称为场景的渲染（rendering）】分离开。建模步骤和渲染步骤所需要的硬件是不同的，而且所需要的软件也可以是不同的。
建模器和渲染器之间的接口可以简单到就是一个文件，这个文件由建模器生成，描述要渲染的对象并且包含只对渲染器来说是重要的附加信息，例如光源、观察者的位置和材质属性。

#流水线体系结构
图形体系结构的主要今朝可以和工作站的进展并驾齐驱。对计算机图形学的应用来说，定制VLSI电路最重要的应用是构建流水线（pipeline）体系结构。（又成管线）
图形绘制流水线简单分为以下几个部分：
1. 顶点处理
2. 裁剪和土元组装
3. 光栅化
4. 片元处理

![geometric-pipeline][4]

##顶点处理
在绘制流水线的第一个模块中，对各个顶点的处理是彼此独立的。这个模块的两个主要功能是执行坐标变换和计算顶点的颜色值。

##裁剪和图元组装
标准图片绘制流水线中的第二个基本模块的任务是裁剪和组装图元。因为没有成像系统能够一次对整个场景成像，所以我们必须进行裁剪。人类视网膜的尺寸是有限的，大约对应于90度视域。照相机的胶片也是大小有限的，其视域可以通过选择不同的透镜来调节。

##光栅化
由裁剪得到的图元任然是用顶点表示的，为了生成帧缓存中的像素还必须做进一步处理。例如，如果三个顶点确定了一个由单色填充的三角形，光栅化模块就必须确定在帧缓冲中有哪些像素位于这三角形的内部。

##片元处理
绘制流水线的最后一个模块利用光栅化模块生成的片元来更新帧缓冲中的像素。如果应用程序生成的是三维的数据，那么一些片元可能是不可见的，因为它们所定义的表面在其他表面的后面。

#可编程流水线（可编程管线）
在可编程流水线中，顶点处理程序可以在顶点经过流水线处理时修改每个顶点的位置或颜色，这样就可以实现许多光线-材质模型或者创建新型的投影。片元处理程序也允许用户以许多新的方式使用纹理。

[1]: images/imaging-with-the-synthetic-camera.png
[2]: images/equivalent-view-of-image-formation.png
[3]: images/clipping.png
[4]: inages/geometric-pipeline.png